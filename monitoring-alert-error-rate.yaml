displayName: "Cloud Run High Error Rate Alert"
documentation:
  content: "Error rate (5xx) exceeded 5% for lingo-keeper-backend"
  mimeType: "text/markdown"
conditions:
  - displayName: "Error rate > 5%"
    conditionThreshold:
      filter: 'resource.type="cloud_run_revision" AND resource.labels.service_name="lingo-keeper-backend" AND metric.type="run.googleapis.com/request_count" AND metric.labels.response_code_class="5xx"'
      aggregations:
        - alignmentPeriod: 60s
          perSeriesAligner: ALIGN_RATE
          crossSeriesReducer: REDUCE_SUM
          groupByFields:
            - resource.service_name
      comparison: COMPARISON_GT
      thresholdValue: 0.05
      duration: 60s
notificationChannels:
  - projects/lingo-keeper/notificationChannels/11640311287788014734
combiner: OR
